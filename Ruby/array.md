# 配列

- 配列リテラル

配列はArrayクラスのインスタンス。

要素を`[]`で囲み、要素間は`,`で区切る。index番号は`0`から始まる。

パーセント記法による配列の生成

`%w`：シングルクォート

`%W`：ダブルクォート

`joinメソッド`：配列の要素を連結して文字列にする

```ruby
animal = 'bear'

v1 = %w(dog rabbit #{animal})
p v1 # => ["dog", "rabbit", "\#{animal}"]

v2 = %W(dog rabbit #{animal})
p v2 # => ["dog", "rabbit", "bear"]

p v2.join()    # => "dograbbitbear"
p v2.join("_") # => "dog_rabbit_bear"
```

---

- インスタンス生成による配列の生成

第一引数に配列のサイズを数値で指定。

→各要素は`nil`が初期値

→要素の初期値には第二引数かブロックで指定

```ruby
a = Array.new(5)
p a        # => [nil, nil, nil, nil, nil]
p a.length # => 5

# ブロックで初期値を指定
p Array.new(2){|index| index + 10}
# => [10, 11]
```

第二引数で指定した初期値は全て同一のオブジェクトになる。

```ruby
a = Array.new(2, 'a')
p a                # => ["a", "a"]
p a[0].equal? a[1] # => true

a[0].replace('b')
p a # =>["b", "b"]
```

ブロックで指定すると同一オブジェクトにならない。

```ruby
a = Array.new(2){'a'}
p a                # => ["a", "a"]
p a[0].equal? a[1] # => false

a[0].replace('b')
p a # => ["b", "a"]
```

`配列のサイズは要素への代入によって動的に変わり、上限を超えた場合はnilを返す。`

```ruby
a = [10]
p a.length    # => 1

a[3] = 'abc'
p a.length    # => 4(代入によってサイズが変わっている) 
p a           # => [10, nil, nil, "abc"]
p a[100]      # => nil
```

---

- 添字演算子

配列の要素への代入などに使用する`[]`はメソッド。

`[]メソッド`と`[]=メソッド`が実行されている。

インデックスに負の整数を指定。

末尾の要素を-1として、先頭に向けて順に減っていく。

```ruby
a = [0, 1, 2, 3, 4, 5]
p a[-1] # => 5
p a[-2] # => 4
p a[-5] # => 1
```

添字に2つの整数を指定すると、最初の添字が操作対象のインデックス、次の添字がそこからの要素数となる。

```ruby
a = [0, 1, 2, 3, 4, 5]
p a[2, 2] # => [2, 3]
p a[1, 4] # => [1, 2, 3, 4]
```

要素数を指定した代入のいろいろ。

```ruby
a = [0, 1, 2, 3]

a[1, 2] = 'a'
p a # => [0, "a", 3]

a = [0, 1, 2, 3]
a[1, 2] = ['a', 'b']
p a # => [0, "a", "b", 3]

a = [0, 1, 2, 3]
a[1, 2] = 'a', 'b' # []省略も可能
p a # => [0, "a", "b", 3]

a = [0, 1, 2, 3]
a[1, 2] = 'a', 'b', 'c' # はみでた場合
p a # => [0, "a", "b", "c", 3]
```

# 配列の演算

- `&`演算子と`|`演算子

```ruby
a = [1, 1, 2, 2]
b = [2, 2, 3, 3]
p a & b # => [2]
p a | b # => [1, 2, 3]
```

---

- `+`演算子と`-`演算子

```ruby
a = [1, 1, 2, 2]
b = [2, 2, 3, 3]
p a + b # => [1, 1, 2, 2, 2, 2, 3, 3]
p a - b # => [1, 1]

c = [1]
p a - c # => [2, 2]
```

`-`演算子では右オペランドで指定された要素が全て取り除かれる。

---

- `*`演算子

右オペランドが数値か文字列かで振る舞いが異なる。

数値の場合：その数だけ連結した配列を返す

文字列の場合：その文字を区切りとして要素を連結した文字列を返す

→配列のjoinメソッドと同じ意味

```ruby
p [1, 2, 3] * 3       # => [1, 2, 3, 1, 2, 3, 1, 2, 3]
p [1, 2, 3] * '-'     # => "1-2-3"
p [1, 2, 3].join('-') # => "1-2-3"
```
